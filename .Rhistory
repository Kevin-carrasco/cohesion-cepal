identificacion =~ c32_01_w01 + c32_02_w01
justicia =~ c18_09_w01 + c18_10_w01
instituciones =~ c05_01_w01 + c05_02_w01 + c05_05_w01 + c05_07_w01 + c05_08_w01
'
fit_1b <- cfa(cfa_1b,data=pertenencia,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1b, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
identificacion =~ c32_01_w01 + c32_02_w01
# Quedan fuera de instituciones c05_05 por baja estimacion
cfa_1c <- '
identificacion =~ c32_01_w01 + c32_02_w01
justicia =~ c18_09_w01 + c18_10_w01
instituciones =~ c05_01_w01 + c05_02_w01 + c05_07_w01 + c05_08_w01
'
fit_1c <- cfa(cfa_1c,data=pertenencia,missing="ML",estimator="MLR")
fitMeasures(fit_1c, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1c, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
fitMeasures(fit_1c, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
organizaciones = data %>%
dplyr::select(c12_01_w01, c12_02_w01,c12_03_w01,c12_04_w01,c12_05_w01,c12_06_w01,c12_07_w01,c12_08_w01) %>%
as.data.frame() %>%
na.omit()
## Pasar "no tenia edad" a "no"
organizaciones$c12_01_w01 <- car::recode(organizaciones$c12_01_w01, "3=1")
organizaciones$c12_02_w01 <- car::recode(organizaciones$c12_02_w01, "3=1")
organizaciones$c12_03_w01 <- car::recode(organizaciones$c12_03_w01, "3=1")
organizaciones$c12_04_w01 <- car::recode(organizaciones$c12_04_w01, "3=1")
organizaciones$c12_05_w01 <- car::recode(organizaciones$c12_05_w01, "3=1")
organizaciones$c12_06_w01 <- car::recode(organizaciones$c12_06_w01, "3=1")
organizaciones$c12_07_w01 <- car::recode(organizaciones$c12_07_w01, "3=1")
organizaciones$c12_08_w01 <- car::recode(organizaciones$c12_08_w01, "3=1")
corMat  <- cor(organizaciones, use="na.or.complete", method="spearman")  # estimar matriz correlacion
cfa_1a <- '
organizaciones =~ c12_01_w01 + c12_02_w01 + c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
'
fit_1a <- cfa(cfa_1a,data=organizaciones,missing="ML",estimator="MLR")
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1a, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
# Quedan fuera c12_01 y c12_02 por bajas correlaciones
cfa_1b <- '
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
'
fit_1b <- cfa(cfa_1b,data=organizaciones,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1b, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
bien_comun = data %>%
dplyr::select(c07_03_w01, c07_05_w01, c07_06_w01, c07_07_w01, c07_08_w01, c08_01_w01, c08_02_w01, c08_03_w01, c08_04_w01, c12_03_w01, c12_04_w01, c12_05_w01, c12_06_w01, c12_07_w01, c12_08_w01, c11_w01) %>%
as.data.frame() %>%
na.omit()
## Pasar "no tenia edad" a "no"
bien_comun$c12_03_w01 <- car::recode(bien_comun$c12_03_w01, "3=1")
bien_comun$c12_04_w01 <- car::recode(bien_comun$c12_04_w01, "3=1")
bien_comun$c12_05_w01 <- car::recode(bien_comun$c12_05_w01, "3=1")
bien_comun$c12_06_w01 <- car::recode(bien_comun$c12_06_w01, "3=1")
bien_comun$c12_07_w01 <- car::recode(bien_comun$c12_07_w01, "3=1")
bien_comun$c12_08_w01 <- car::recode(bien_comun$c12_08_w01, "3=1")
bien_comun$c11_w01 <- car::recode(bien_comun$c11_w01, "3=1")
cfa_1a <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
voto =~ c11_w01
'
fit_1a <- cfa(cfa_1a,data=bien_comun,missing="ML",estimator="MLR")
semPaths(fit_1a, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
cfa_1b <- '
solidaridad =~ c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
voto =~ c11_w01
'
fit_1b <- cfa(cfa_1b,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1b, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
cfa_1b <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
voto =~ c11_w01
'
fit_1b <- cfa(cfa_1b,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1b, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
participacion = data %>%
dplyr::select(c08_01_w01, c08_02_w01, c08_03_w01, c08_04_w01) %>%
as.data.frame() %>%
na.omit()
cfa_1a <- '
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
'
fit_1a <- cfa(cfa_1a,data=participacion,missing="ML",estimator="MLR")
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1a, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
cfa_1a <- '
participacion =~ c08_02_w01 + c08_03_w01 + c08_04_w01
'
fit_1a <- cfa(cfa_1a,data=participacion,missing="ML",estimator="MLR")
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1a, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
cfa_1a <- '
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
'
fit_1a <- cfa(cfa_1a,data=participacion,missing="ML",estimator="MLR")
cfa_1a <- '
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
'
fit_1a <- cfa(cfa_1a,data=participacion,missing="ML",estimator="MLR")
cfa_1a <- '
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
'
fit_1a <- cfa(cfa_1a,data=participacion,missing="ML",estimator="MLR")
cfa_1b <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
'
fit_1b <- cfa(cfa_1b,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1b, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
cfa_1a <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
voto =~ c11_w01
'
fit_1a <- cfa(cfa_1a,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
cfa_1b <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
'
fit_1b <- cfa(cfa_1b,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
cfa_1b <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
voto =~ c11_w01
'
fit_1b <- cfa(cfa_1b,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1a, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
# Quedan fuera estimaciones menores a 0.5 (c12_08, c12_07, c12_06, c12_03, c07_03)
cfa_1b <- '
solidaridad =~ c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_04_w01 + c12_05_w01
voto =~ c11_w01
'
fit_1b <- cfa(cfa_1b,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1a, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
# LibrerÃ­as
pacman::p_load(lavaan, # pacman para instalar / cargar
psych, # para funcion lowerMat
Hmisc, # rcorr
stargazer,
xtable,
semPlot,
semTools,
remedy,
haven,
h2o,
polycor,
car,
sjlabelled,
sjmisc,
misty,
SciViews,
summarytools,
dplyr)
# Base
# Cargar base elsoc longitudinal (2016-2019)
load("../input/data/data.RData")
# Filtramos base para dejar casos completos de 2016 al 2019 sin inconsistencias
data <- data %>% dplyr::filter(tipo_atricion==1 & tipo_caso !=2)
# crear una base de datos con menos variables para estimar los AFC
bien_comun = data %>%
dplyr::select(c07_03_w01, c07_05_w01, c07_06_w01, c07_07_w01, c07_08_w01, c08_01_w01, c08_02_w01, c08_03_w01, c08_04_w01, c12_03_w01, c12_04_w01, c12_05_w01, c12_06_w01, c12_07_w01, c12_08_w01, c11_w01) %>%
as.data.frame() %>%
na.omit()
View(bien_comun)
## Pasar "no tenia edad" a "no"
bien_comun$c12_03_w01 <- car::recode(bien_comun$c12_03_w01, "3=1")
bien_comun$c12_04_w01 <- car::recode(bien_comun$c12_04_w01, "3=1")
bien_comun$c12_05_w01 <- car::recode(bien_comun$c12_05_w01, "3=1")
bien_comun$c12_06_w01 <- car::recode(bien_comun$c12_06_w01, "3=1")
bien_comun$c12_07_w01 <- car::recode(bien_comun$c12_07_w01, "3=1")
bien_comun$c12_08_w01 <- car::recode(bien_comun$c12_08_w01, "3=1")
bien_comun$c11_w01 <- car::recode(bien_comun$c11_w01, "3=1")
cfa_1c <- '
solidaridad =~ c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
voto =~ c11_w01
'
fit_1c <- cfa(cfa_1c,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1c, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
cfa_1b <- '
solidaridad =~ c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_04_w01 + c12_05_w01
voto =~ c11_w01
'
fit_1b <- cfa(cfa_1b,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
cfa_1a <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
voto =~ c11_w01
'
fit_1a <- cfa(cfa_1a,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
mod=modificationindices(fit_1a)
subset(mod, mi>3.84, select=lhs:mi)
cfa_1c <- '
solidaridad =~ c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_04_w01
organizaciones =~ c12_04_w01 + c12_05_w01
voto =~ c11_w01
'
fit_1c <- cfa(cfa_1c,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1c, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
cfa_1c <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
voto =~ c11_w01
'
fit_1c <- cfa(cfa_1c,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_1c, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
mod=modificationindices(fit_1c)
subset(mod, mi>3.84, select=lhs:mi)
semPaths(fit_1c, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
# crear una base de datos con menos variables para estimar los AFC
relaciones_sociales = data %>%
dplyr::select(r15_w02, c02_w01, c03_w01, c04_w01, r12_03_w01, r12_04_w01, c06_04_w01, c06_05_w01, c06_06_w01) %>%
as.data.frame() %>%
na.omit()
cfa_1a <- '
lazos =~ r15_w02
confianza =~ c02_w01 + c03_w01 + c04_w01
diversidad =~ r12_03_w01 + r12_04_w01 + c06_04_w01 + c06_05_w01 + c06_06_w01
'
fit_1a <- cfa(cfa_1a,data=relaciones_sociales,missing="ML",estimator="MLR")
fitMeasures(fit_1a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
mod=modificationindices(fit_1a)
subset(mod, mi>3.84, select=lhs:mi)
cfa_1b <- '
lazos =~ r15_w02
confianza =~ c02_w01 + c03_w01 + c04_w01
prejuicios =~ r12_03_w01 + r12_04_w01
diversidad =~ c06_04_w01 + c06_05_w01 + c06_06_w01
'
fit_1b <- cfa(cfa_1b,data=relaciones_sociales,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
mod=modificationindices(fit_1b)
subset(mod, mi>3.84, select=lhs:mi)
cfa_1b <- '
lazos =~ r15_w02
confianza =~ c02_w01 + c03_w01 + c04_w01
prejuicios =~ r12_03_w01 + r12_04_w01
diversidad =~ c06_04_w01 + c06_05_w01
'
fit_1b <- cfa(cfa_1b,data=relaciones_sociales,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
cfa_1b <- '
lazos =~ r15_w02
confianza =~ c02_w01 + c03_w01 + c04_w01
prejuicios =~ r12_03_w01 + r12_04_w01 + c06_06_w01
diversidad =~ c06_04_w01 + c06_05_w01
'
fit_1b <- cfa(cfa_1b,data=relaciones_sociales,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
cfa_1b <- '
lazos =~ r15_w02
confianza =~ c02_w01 + c03_w01 + c04_w01
prejuicios =~ r12_03_w01 + r12_04_w01 + c06_06_w01
diversidad =~ c06_04_w01 + c06_05_w01
'
fit_1b <- cfa(cfa_1b,data=relaciones_sociales,missing="ML",estimator="MLR")
fitMeasures(fit_1b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
cfa_1c <- '
lazos =~ r15_w02
confianza =~ c02_w01 + c03_w01 + c04_w01
prejuicios =~ r12_03_w01 + r12_04_w01
diversidad =~ c06_04_w01 + c06_05_w01
'
fit_1c <- cfa(cfa_1c,data=relaciones_sociales,missing="ML",estimator="MLR")
fitMeasures(fit_1c, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
semPaths(fit_1b, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
semPaths(fit_1c, intercepts = FALSE,edge.label.cex=1.5, optimizeLatRes = TRUE, groups = "lat",pastel = TRUE, exoVar = FALSE, sizeInt=5,edge.color ="black",esize = 6, label.prop=2,sizeLat = 6,"std", layout="circle2")
mod=modificationindices(fit_1c)
subset(mod, mi>3.84, select=lhs:mi)
cfa_2a <- '
identificacion =~ c32_01_w01 + c32_02_w01
justicia =~ c18_09_w01 + c18_10_w01
instituciones =~ c05_01_w01 + c05_02_w01 + c05_03_w01 + c05_04_w01 + c05_05_w01 + c05_06_w01 + c05_07_w01 + c05_08_w01
'
fit_2a <- cfa(cfa_2a,data=pertenencia,missing="ML",estimator="MLR")
# crear una base de datos con menos variables para estimar los AFC
pertenencia = data %>%
dplyr::select(c32_01_w01, c32_02_w01, c18_09_w01, c18_10_w01, c05_01_w01, c05_02_w01, c05_03_w01, c05_04_w01, c05_05_w01, c05_06_w01, c05_07_w01, c05_08_w01) %>%
as.data.frame() %>%
na.omit()
cfa_2a <- '
identificacion =~ c32_01_w01 + c32_02_w01
justicia =~ c18_09_w01 + c18_10_w01
instituciones =~ c05_01_w01 + c05_02_w01 + c05_03_w01 + c05_04_w01 + c05_05_w01 + c05_06_w01 + c05_07_w01 + c05_08_w01
'
fit_2a <- cfa(cfa_2a,data=pertenencia,missing="ML",estimator="MLR")
fitMeasures(fit_2a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
mod=modificationindices(fit_2a)
subset(mod, mi>3.84, select=lhs:mi)
# Quedan fuera de instituciones c05_03, c05_04 y c05_06 por baja estimacion
cfa_2b <- '
identificacion =~ c32_01_w01 + c32_02_w01
justicia =~ c18_09_w01 + c18_10_w01
instituciones =~ c05_01_w01 + c05_02_w01 + c05_03_w01 + c05_04_w01 + c05_05_w01 + c05_06_w01 + c05_07_w01
'
fit_2b <- cfa(cfa_2b,data=pertenencia,missing="ML",estimator="MLR")
fitMeasures(fit_2b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
mod=modificationindices(fit_2b)
subset(mod, mi>3.84, select=lhs:mi)
# Quedan fuera de instituciones c05_02 por "mi" alto
cfa_2c <- '
identificacion =~ c32_01_w01 + c32_02_w01
justicia =~ c18_09_w01 + c18_10_w01
instituciones =~ c05_01_w01 + c05_03_w01 + c05_04_w01 + c05_05_w01 + c05_06_w01 + c05_07_w01
'
fit_2c <- cfa(cfa_2c,data=pertenencia,missing="ML",estimator="MLR")
fitMeasures(fit_2c, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
# crear una base de datos con menos variables para estimar los AFC
bien_comun = data %>%
dplyr::select(c07_03_w01, c07_05_w01, c07_06_w01, c07_07_w01, c07_08_w01, c08_01_w01, c08_02_w01, c08_03_w01, c08_04_w01, c12_03_w01, c12_04_w01, c12_05_w01, c12_06_w01, c12_07_w01, c12_08_w01, c11_w01) %>%
as.data.frame() %>%
na.omit()
## Pasar "no tenia edad" a "no"
bien_comun$c12_03_w01 <- car::recode(bien_comun$c12_03_w01, "3=1")
bien_comun$c12_04_w01 <- car::recode(bien_comun$c12_04_w01, "3=1")
bien_comun$c12_05_w01 <- car::recode(bien_comun$c12_05_w01, "3=1")
bien_comun$c12_06_w01 <- car::recode(bien_comun$c12_06_w01, "3=1")
bien_comun$c12_07_w01 <- car::recode(bien_comun$c12_07_w01, "3=1")
bien_comun$c12_08_w01 <- car::recode(bien_comun$c12_08_w01, "3=1")
bien_comun$c11_w01 <- car::recode(bien_comun$c11_w01, "3=1")
cfa_3a <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_03_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
voto =~ c11_w01
'
fit_3a <- cfa(cfa_3a,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_3a, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
mod=modificationindices(fit_3a)
subset(mod, mi>3.84, select=lhs:mi)
# Queda fuera c08_03 por "mi" alto
cfa_3b <- '
solidaridad =~ c07_03_w01 + c07_05_w01 + c07_06_w01 + c07_07_w01 + c07_08_w01
participacion =~ c08_01_w01 + c08_02_w01 + c08_04_w01
organizaciones =~ c12_03_w01 + c12_04_w01 + c12_05_w01 + c12_06_w01 + c12_07_w01 + c12_08_w01
voto =~ c11_w01
'
fit_3b <- cfa(cfa_3b,data=bien_comun,missing="ML",estimator="MLR")
fitMeasures(fit_3b, c("chisq", "df", "pvalue", "cfi", "tli", "rmsea"))
mod=modificationindices(fit_3b)
subset(mod, mi>3.84, select=lhs:mi)
###### b. Cargar base de datos ######
load(url("https://dataverse.harvard.edu/api/access/datafile/4606527")) #cargar bbdd desde url oficial alojado en dataverse
knitr::opts_chunk$set(echo = T, warning = F, message = F)
data <- load(url("https://dataverse.harvard.edu/api/access/datafile/4606527")) #cargar bbdd desde url oficial alojado en dataverse
data <- load(url("https://dataverse.harvard.edu/api/access/datafile/4606527")) #cargar bbdd desde url oficial alojado en dataverse
data <- get(load(url("https://dataverse.harvard.edu/api/access/datafile/4606527"))) #cargar bbdd desde url oficial alojado en dataverse
data <- get(load(url("https://dataverse.harvard.edu/api/access/datafile/4606527"))) #desde url oficial en dataverse
remove(elsoc_wide_2016_2019)
pacman::p_load(dplyr, car, summarytools, webshot, sjmisc)
data$c05_01_w01 <- recode(data$c05_01_w01, "c(-888,-999)=NA")
data$c05_01_w02 <- recode(data$c05_01_w02, "c(-888,-999)=NA")
data$c05_01_w03 <- recode(data$c05_01_w03, "c(-888,-999)=NA")
data$c05_01_w04 <- recode(data$c05_01_w04, "c(-888,-999)=NA")
sjmisc::frq(data$c05_01_w01)
sjmisc::frq(data$c05_01_w01)
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(elsoc_wide_2016_2019$tipo_caso)
###### b. Cargar base de datos ######
load(url("https://dataverse.harvard.edu/api/access/datafile/4606527")) #cargar bbdd desde url oficial alojado en dataverse
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(elsoc_wide_2016_2019$tipo_caso)
remove(list = ls()) #limpieza del entorno de trabajo
options(scipen=999) #evita notaciÃ³n cientÃ­fica
###### b. Cargar base de datos ######
load(url("https://dataverse.harvard.edu/api/access/datafile/4606527")) #cargar bbdd desde url oficial alojado en dataverse
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(elsoc_wide_2016_2019$tipo_caso)
remove(list = ls()) #limpieza del entorno de trabajo
options(scipen=999) #evita notaciÃ³n cientÃ­fica
###### b. Cargar base de datos ######
load(url("https://dataverse.harvard.edu/api/access/datafile/4606527")) #cargar bbdd desde url oficial alojado en dataverse
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(elsoc_wide_2016_2019$tipo_caso)
library(pacman)
pacman::p_load(car,dplyr,panelr,stringr,tidyverse,ggplot2,survey,ggrepel,na.tools)
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(elsoc_wide_2016_2019$tipo_caso)
library(tidyverse) #ggplot, dplyer, stringr
install.packages("dplyr")
install.packages("dplyr")
library(tidyverse) #ggplot, dplyer, stringr
install.packages("ellipsis")
library(tidyverse) #ggplot, dplyer, stringr
install.packages("vctrs")
install.packages("vctrs")
library(tidyverse) #ggplot, dplyer, stringr
install.packages("vctrs")
install.packages("vctrs")
library(tidyverse) #ggplot, dplyer, stringr
install.packages("lubridate")
library(tidyverse) #ggplot, dplyer, stringr
install.packages("tidyr")
install.packages("tidyr")
library(tidyverse) #ggplot, dplyer, stringr
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(elsoc_wide_2016_2019$tipo_caso)
pacman::p_load(car,dplyr,panelr,stringr,ggplot2,survey,ggrepel,na.tools)
install.packages("pacman")
install.packages("pacman")
library(pacman)
pacman::p_load(car,dplyr,panelr,stringr,ggplot2,survey,ggrepel,na.tools)
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(elsoc_wide_2016_2019$tipo_caso)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
sjmisc::frq(data$c05_01_w01)
data <- get(load(url("https://dataverse.harvard.edu/api/access/datafile/4606527"))) #desde url oficial en dataverse
remove(elsoc_wide_2016_2019)
sjmisc::frq(data$c05_01_w01)
sjmisc::frq(data$c05_01_w02)
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(data$tipo_caso)
###### c. SelecciÃ³n de variables y filtrado de datos ######
sjmisc::frq(data$tipo_caso)
sjmisc::frq(data$c05_01_w01)
frq(data$c05_01_w01)
pacman::p_load(dplyr, car, summarytools, webshot, sjmisc)
frq(data$c05_01_w01)
sjmisc::frq(data$c05_01_w01)
sjmisc::frq(data$c05_01_w01)
sjmisc::frq(data$c05_01_w01)
cat(data$c05_01_w01)
data$c05_01_w01 <- recode(data$c05_01_w01, "c(-888,-999)=NA")
data$c05_01_w02 <- recode(data$c05_01_w02, "c(-888,-999)=NA")
data$c05_01_w03 <- recode(data$c05_01_w03, "c(-888,-999)=NA")
data$c05_01_w04 <- recode(data$c05_01_w04, "c(-888,-999)=NA")
data <- na.omit(data)
data <- get(load(url("https://dataverse.harvard.edu/api/access/datafile/4606527"))) #desde url oficial en dataverse
remove(elsoc_wide_2016_2019)
data$c05_01_w01 <- recode(data$c05_01_w01, "c(-888,-999)=NA")
data$c05_01_w02 <- recode(data$c05_01_w02, "c(-888,-999)=NA")
data$c05_01_w03 <- recode(data$c05_01_w03, "c(-888,-999)=NA")
data$c05_01_w04 <- recode(data$c05_01_w04, "c(-888,-999)=NA")
cat(data$c05_01_w01)
data <- get(load(url("https://dataverse.harvard.edu/api/access/datafile/4606527"))) #desde url oficial en dataverse
remove(elsoc_wide_2016_2019)
data$c05_01_w01 <- car::recode(data$c05_01_w01, "c(-888,-999)=NA")
data$c05_01_w02 <- car::recode(data$c05_01_w02, "c(-888,-999)=NA")
data$c05_01_w03 <- car::recode(data$c05_01_w03, "c(-888,-999)=NA")
data$c05_01_w04 <- car::recode(data$c05_01_w04, "c(-888,-999)=NA")
cat(data$c05_01_w01)
sjmisc::frq(data$c05_01_w01)
data$c05_01_w01 <- na.omit(data$c05_01_w01)
data <- na.omit(c05_01_w01)
data <- na.omit(data)
data <- get(load(url("https://dataverse.harvard.edu/api/access/datafile/4606527"))) #desde url oficial en dataverse
remove(elsoc_wide_2016_2019)
data %>% select(c05_01_w01) %>%
na.omit() %>%
sjmisc::frq()
data <- get(load(url("https://dataverse.harvard.edu/api/access/datafile/4606527"))) #desde url oficial en dataverse
remove(elsoc_wide_2016_2019)
data %>% select(c05_01_w01) %>%
na.omit() %>%
sjmisc::frq()
data %>% select(c05_01_w01) %>%
na.omit() %>%
sjmisc::frq()
class(data$c05_01_w01)
sjmisc::frq(data$c05_02_w01)
install.packages("lavaan", repos = "http://www.da.ugent.be", type = "source")
sjmisc::frq(data$c05_01_w01)
pacman::p_load(dplyr, car, summarytools, webshot, sjmisc)
install.packages("sjmisc")
install.packages("sjmisc")
knitr::opts_chunk$set(echo = T, warning = F, message = F)
library(sjmisc)
sjmisc::frq(data$c05_01_w01)
data$c05_01_w01 <- car::recode(data$c05_01_w01, "c(-888,-999)=NA")
data$c05_01_w02 <- car::recode(data$c05_01_w02, "c(-888,-999)=NA")
data$c05_01_w03 <- car::recode(data$c05_01_w03, "c(-888,-999)=NA")
data$c05_01_w04 <- car::recode(data$c05_01_w04, "c(-888,-999)=NA")
sjmisc::frq(data$c05_01_w01)
sjmisc::frq(data$c05_01_w02)
sjmisc::frq(data$c05_01_w03)
sjmisc::frq(data$c05_01_w04)
data$c05_02_w01 <- recode(data$c05_02_w01, "c(-888,-999)=NA")
xaringan::inf_mr()
xaringan::inf_mr()
knitr::opts_chunk$set(echo = TRUE, warning=F, message=F)
cor_graf2 <- corrplot.mixed(cor(dplyr::select(data, c02_w01, c03_w01, c04_w01),
method="spearman",
use = "na.or.complete"))
