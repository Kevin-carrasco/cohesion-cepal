data$diversidad_med <- ifelse(data$diversidad <= median(data$diversidad, na.rm = T), 1, 2)
data$diversidad_mean <- ifelse(data$diversidad <= mean(data$diversidad, na.rm = T), 1, 2)
data %>% dplyr::select(diversidad_med, diversidad_mean) %>% dfSummary(, graph.col = FALSE)
data %>% dplyr::select(diversidad_med, diversidad_mean) %>% dfSummary(, graph.col = FALSE)
### Lazos
```{r}
### Pasar la variable a numérica
data$lazos_w01 = as.numeric(data$vol.red_w01)
data$lazos_w03 = as.numeric(data$vol.red_w03)
data %>% dplyr::select(lazos_w01, lazos_w03)  %>%  dfSummary(, graph.col = FALSE)
data %>% dplyr::select(lazos_w01, lazos_w03)  %>%  dfSummary(, graph.col = FALSE)
```{r}
### Estimar el promedio general de todas las olas
data <- data %>%
rowwise() %>%
mutate(lazos = mean(c(lazos_w01, lazos_w03), na.rm=T))
# Check
data %>% dplyr::select(lazos) %>%  dfSummary(, graph.col = FALSE)
data$lazos_med <- ifelse(data$lazos <= median(data$lazos, na.rm = T), 1, 2)
data$lazos_mean <- ifelse(data$lazos <= mean(data$lazos, na.rm = T), 1, 2)
data %>% dplyr::select(lazos_med, lazos_mean) %>% dfSummary(, graph.col = FALSE)
## Sentido de pertenencia
### Identificación con el país
```{r}
### estimar promedio simple de cada subdimensión en todas las olas que estos indicadores están presentes
data <- data %>%
rowwise() %>%
mutate(identificacion_w01 =
mean(c(c32_01_w01, c32_02_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(identificacion_w02 =
mean(c(c32_01_w02, c32_02_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(identificacion_w03 =
mean(c(c32_01_w03, c32_02_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(identificacion_w04 =
mean(c(c32_01_w04, c32_02_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(identificacion_w05 =
mean(c(c32_01_w05, c32_02_w05), na.rm = T))
data %>% dplyr::select(identificacion_w01, identificacion_w02, identificacion_w03, identificacion_w04, identificacion_w05) %>%  dfSummary(, graph.col = FALSE)
data %>% dplyr::select(identificacion_w01, identificacion_w02, identificacion_w03, identificacion_w04, identificacion_w05) %>%  dfSummary(, graph.col = FALSE)
```{r}
### Estimar el promedio general de todas las olas
data <- data %>%
rowwise() %>%
mutate(identificacion = mean(c(identificacion_w01,
identificacion_w02,
identificacion_w03,
identificacion_w04,
identificacion_w05), na.rm=T))
data %>% dplyr::select(identificacion)  %>%  dfSummary(, graph.col = FALSE)
data %>% dplyr::select(identificacion)  %>%  dfSummary(, graph.col = FALSE)
```{r}
data$identificacion_med <- ifelse(data$identificacion <= median(data$identificacion, na.rm = T), 1, 2)
data$identificacion_mean <- ifelse(data$identificacion <= mean(data$identificacion, na.rm = T), 1, 2)
data %>% dplyr::select(identificacion_med, identificacion_mean) %>% dfSummary(, graph.col = FALSE)
data %>% dplyr::select(identificacion_med, identificacion_mean) %>% dfSummary(, graph.col = FALSE)
### Percepción de justicia
```{r}
### estimar promedio simple de cada subdimensión en todas las olas que estos indicadores están presentes
data <- data %>%
rowwise() %>%
mutate(justicia_w01 =
mean(c(c18_09_w01, c18_10_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(justicia_w02 =
mean(c(c18_09_w02, c18_10_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(justicia_w03 =
mean(c(c18_09_w03, c18_10_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(justicia_w04 =
mean(c(c18_09_w04, c18_10_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(justicia_w05 =
mean(c(c18_09_w05, c18_10_w05), na.rm = T))
data %>% dplyr::select(justicia_w01, justicia_w02, justicia_w03, justicia_w04, justicia_w05) %>%  dfSummary(, graph.col = FALSE)
data %>% dplyr::select(justicia_w01, justicia_w02, justicia_w03, justicia_w04, justicia_w05) %>%  dfSummary(, graph.col = FALSE)
```{r}
### Estimar el promedio general de todas las olas
data <- data %>%
rowwise() %>%
mutate(justicia = mean(c(justicia_w01,
justicia_w02,
justicia_w03,
justicia_w04,
justicia_w05), na.rm=T))
data %>% dplyr::select(justicia)  %>%  dfSummary(, graph.col = FALSE)
data %>% dplyr::select(justicia)  %>%  dfSummary(, graph.col = FALSE)
```{r}
data$justicia_med <- ifelse(data$justicia <= median(data$justicia, na.rm = T), 1, 2)
data$justicia_mean <- ifelse(data$justicia <= mean(data$justicia, na.rm = T), 1, 2)
data %>% dplyr::select(justicia_med, justicia_mean) %>% dfSummary(, graph.col = FALSE)
data %>% dplyr::select(justicia_med, justicia_mean) %>% dfSummary(, graph.col = FALSE)
### estimar promedio simple de cada subdimensión en todas las olas que estos indicadores están presentes
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w01 =
mean(c(c05_01_w01, c05_08_w01, c05_02_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w02 =
mean(c(c05_01_w02, c05_08_w02, c05_02_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w03 =
mean(c(c05_01_w03, c05_08_w03, c05_02_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w04 =
mean(c(c05_01_w04, c05_08_w04, c05_02_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w05 =
mean(c(c05_01_w05, c05_08_w05, c05_02_w05), na.rm = T))
data %>% dplyr::select(conf_institucional_w01, conf_institucional_w02, conf_institucional_w03, conf_institucional_w04, conf_institucional_w05)  %>%  dfSummary(, graph.col = FALSE)
### Estimar el promedio general de todas las olas
data <- data %>%
rowwise() %>%
mutate(conf_institucional = mean(c(conf_institucional_w01,
conf_institucional_w02,
conf_institucional_w03,
conf_institucional_w04,
conf_institucional_w05), na.rm=T))
data %>% dplyr::select(conf_institucional)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data %>% dplyr::select(conf_institucional)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$conf_institucional_med <- ifelse(data$conf_institucional <= median(data$conf_institucional, na.rm = T), 1, 2)
data$conf_institucional_mean <- ifelse(data$conf_institucional <= mean(data$conf_institucional, na.rm = T), 1, 2)
data %>% dplyr::select(conf_institucional_med, conf_institucional_mean) %>% dfSummary(, graph.col = FALSE)
### estimar promedio simple de cada subdimensión en todas las olas que estos indicadores están presentes
data <- data %>%
rowwise() %>%
mutate(solidaridad_w01 =
mean(c(c07_05_w01, c07_06_w01, c07_07_w01, c07_08_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(solidaridad_w02 =
mean(c(c07_05_w02, c07_06_w02, c07_07_w02, c07_08_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(solidaridad_w03 =
mean(c(c07_05_w03, c07_06_w03, c07_07_w03, c07_08_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(solidaridad_w04 =
mean(c(c07_05_w04, c07_06_w04, c07_07_w04, c07_08_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(solidaridad_w05 =
mean(c(c07_05_w05, c07_06_w05, c07_07_w05, c07_08_w05), na.rm = T))
data %>% dplyr::select(solidaridad_w01, solidaridad_w02, solidaridad_w03, solidaridad_w04, solidaridad_w05) %>%  dfSummary(, graph.col = FALSE)
### Estimar el promedio general de todas las olas
data <- data %>%
rowwise() %>%
mutate(solidaridad = mean(c(solidaridad_w01,
solidaridad_w02,
solidaridad_w03,
solidaridad_w04,
solidaridad_w05), na.rm=T))
data %>% dplyr::select(solidaridad)  %>%  dfSummary(, graph.col = FALSE)
data$solidaridad_med <- ifelse(data$solidaridad <= median(data$solidaridad, na.rm = T), 1, 2)
data$solidaridad_mean <- ifelse(data$solidaridad <= mean(data$solidaridad, na.rm = T), 1, 2)
data %>% dplyr::select(solidaridad_med, solidaridad_mean) %>% dfSummary(, graph.col = FALSE)
data %>% dplyr::select(solidaridad_med, solidaridad_mean) %>% dfSummary(, graph.col = FALSE)
### estimar promedio simple de cada subdimensión en todas las olas que estos indicadores están presentes
data <- data %>%
rowwise() %>%
mutate(participacion_w01 =
mean(c(c08_01_w01, c08_02_w01, c08_03_w01, c08_04_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(participacion_w02 =
mean(c(c08_01_w02, c08_02_w02, c08_03_w02, c08_04_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(participacion_w03 =
mean(c(c08_01_w03, c08_02_w03, c08_03_w03, c08_04_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(participacion_w04 =
mean(c(c08_01_w04, c08_02_w04, c08_03_w04, c08_04_w04), na.rm = T))
data %>% dplyr::select(participacion_w01, participacion_w02, participacion_w03, participacion_w04) %>%  dfSummary(, graph.col = FALSE)
data %>% dplyr::select(participacion_w01, participacion_w02, participacion_w03, participacion_w04) %>%  dfSummary(, graph.col = FALSE)
### Estimar el promedio general de todas las olas
data <- data %>%
rowwise() %>%
mutate(participacion = mean(c(participacion_w01,
participacion_w02,
participacion_w03,
participacion_w04), na.rm=T))
data %>% dplyr::select(participacion) %>%  dfSummary(, graph.col = FALSE)
data$participacion_med <- ifelse(data$participacion <= median(data$participacion, na.rm = T), 1, 2)
data$participacion_mean <- ifelse(data$participacion <= mean(data$participacion, na.rm = T), 1, 2)
data %>% dplyr::select(participacion_med, participacion_mean) %>% dfSummary(, graph.col = FALSE)
data %>% dplyr::select(participacion_med, participacion_mean) %>% dfSummary(, graph.col = FALSE)
### estimar promedio simple de cada subdimensión en todas las olas que estos indicadores están presentes
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial_w01 =
mean(c(t02_01_w01, t02_02_w01, t02_03_w01, t02_04_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial_w02 =
mean(c(t02_01_w02, t02_02_w02, t02_03_w02, t02_04_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial_w03 =
mean(c(t02_01_w03, t02_02_w03, t02_03_w03, t02_04_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial_w04 =
mean(c(t02_01_w04, t02_02_w04, t02_03_w04, t02_04_w04), na.rm = T))
data %>% dplyr::select(cohesion_territorial_w01, cohesion_territorial_w02, cohesion_territorial_w03, cohesion_territorial_w04) %>%  dfSummary(, graph.col = FALSE)
### Estimar el promedio general de todas las olas
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial = mean(c(cohesion_territorial_w01,
cohesion_territorial_w02,
cohesion_territorial_w03,
cohesion_territorial_w04), na.rm=T))
data %>% dplyr::select(cohesion_territorial)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$cohesion_territorial_med <- ifelse(data$cohesion_territorial <= median(data$cohesion_territorial, na.rm = T), 1, 2)
data$cohesion_territorial_mean <- ifelse(data$cohesion_territorial <= mean(data$cohesion_territorial, na.rm = T), 1, 2)
data %>% dplyr::select(cohesion_territorial_med, cohesion_territorial_mean) %>% dfSummary(, graph.col = FALSE)
## Crear nueva base que contiene las variables categorizadas
cohesion_med <- data %>% dplyr::select(conf_interpersonal_med, diversidad_med, lazos_med, identificacion_med, justicia_med, conf_institucional_med, solidaridad_med, participacion_med, cohesion_territorial_med) %>% na.omit()
cohesion_mean <- data %>% dplyr::select(conf_interpersonal_mean, diversidad_mean, lazos_mean, identificacion_mean, justicia_mean, conf_institucional_mean, solidaridad_mean, participacion_mean, cohesion_territorial_mean) %>% na.omit()
cohesion_med %>% dfSummary(, graph.col = FALSE)
cohesion_mean %>% dfSummary(, graph.col = FALSE)
save(cohesion_med,file = "input/data/proc/cohesion-med-LCA.RData")
save(cohesion_mean,file = "input/data/proc/cohesion-mean-LCA.RData")
source('~/.active-rstudio-document')
load("../input/data/proc/cohesion-med-LCA.RData")
load("input/data/proc/cohesion-med-LCA.RData")
patterns=table(apply(cohesion_med, 1, paste, collapse=""))
patterns
patterns_m=as.data.frame(patterns)
patterns_m <- patterns_m[order(-patterns_m$Freq),]
patterns_m
f <- cbind(conf_interpersonal_med, diversidad_med, lazos_med, identificacion_med, justicia_med, conf_institucional_med, solidaridad_med, participacion_med, cohesion_territorial_med)~1
set.seed(1234)
lca1 <- poLCA(f,cohesion_med, nclass=1,graphs=F)
lca2 <- poLCA(f,cohesion_med, nclass=2,graphs=F)
lca4 <- poLCA(f,cohesion_med, nclass=4,graphs=F)
lca4 <- poLCA(f,cohesion_med, nclass=4,graphs=F)
lca5 <- poLCA(f,cohesion_med, nclass=5,graphs=F)
lca5 <- poLCA(f,cohesion_med, nclass=5,graphs=F)
lca6 <- poLCA(f,cohesion_med, nclass=6,graphs=F)
lca1 <- poLCA(f,cohesion_med, nclass=1,graphs=F, verbose = FALSE)
AIC.1 <-as.numeric(lca1$aic)
AIC.2 <-as.numeric(lca2$aic)
AIC.3 <-as.numeric(lca3$aic)
AIC.4 <-as.numeric(lca4$aic)
AIC.5 <-as.numeric(lca5$aic)
AIC.6 <-as.numeric(lca6$aic)
BIC.1 <-as.numeric(lca1$bic)
BIC.2 <-as.numeric(lca2$bic)
BIC.3 <-as.numeric(lca3$bic)
BIC.4 <-as.numeric(lca4$bic)
BIC.5 <-as.numeric(lca5$bic)
BIC.6 <-as.numeric(lca6$bic)
llik.1 <-as.numeric(lca1$llik)
llik.2 <-as.numeric(lca2$llik)
llik.3 <-as.numeric(lca3$llik)
llik.4 <-as.numeric(lca4$llik)
llik.5 <-as.numeric(lca5$llik)
llik.6 <-as.numeric(lca6$llik)
chisq.1 <- as.numeric(lca1$Chisq)
chisq.2 <- as.numeric(lca2$Chisq)
chisq.3 <- as.numeric(lca3$Chisq)
chisq.4 <- as.numeric(lca4$Chisq)
chisq.5 <- as.numeric(lca5$Chisq)
chisq.6 <- as.numeric(lca6$Chisq)
G.1 <- as.numeric(lca1$Gsq)
G.2 <- as.numeric(lca2$Gsq)
G.3 <- as.numeric(lca3$Gsq)
G.4 <- as.numeric(lca4$Gsq)
G.5 <- as.numeric(lca5$Gsq)
G.6 <- as.numeric(lca6$Gsq)
n.obs1 <- as.numeric(lca1$Nobs)
n.obs2 <- as.numeric(lca2$Nobs)
n.obs3 <- as.numeric(lca3$Nobs)
n.obs4 <- as.numeric(lca4$Nobs)
n.obs5 <- as.numeric(lca5$Nobs)
n.obs6 <- as.numeric(lca6$Nobs)
#Creación de Vectores para TABLA DE COMPARACIÓN
AIC <- c(AIC.1, AIC.2,AIC.3,AIC.4,AIC.5, AIC.6)
BIC <- c(BIC.1, BIC.2,BIC.3,BIC.4,BIC.5, BIC.6)
#Creación de Vectores para TABLA DE COMPARACIÓN
AIC <- c(AIC.1, AIC.2,AIC.3,AIC.4,AIC.5, AIC.6)
BIC <- c(BIC.1, BIC.2,BIC.3,BIC.4,BIC.5, BIC.6)
BIC.3 <-as.numeric(lca3$bic)
AIC.1 <-as.numeric(lca1$aic)
AIC.2 <-as.numeric(lca2$aic)
AIC.3 <-as.numeric(lca3$aic)
AIC.4 <-as.numeric(lca4$aic)
lca1 <- poLCA(f,cohesion_med, nclass=1,graphs=F, verbose = FALSE)
lca2 <- poLCA(f,cohesion_med, nclass=2,graphs=F, verbose = FALSE)
lca3 <- poLCA(f,cohesion_med, nclass=3,graphs=F, verbose = FALSE)
lca5 <- poLCA(f,cohesion_med, nclass=5,graphs=F, verbose = FALSE)
lca5 <- poLCA(f,cohesion_med, nclass=5,graphs=F, verbose = FALSE)
lca6 <- poLCA(f,cohesion_med, nclass=6,graphs=F, verbose = FALSE)
AIC.1 <-as.numeric(lca1$aic)
AIC.2 <-as.numeric(lca2$aic)
AIC.3 <-as.numeric(lca3$aic)
AIC.4 <-as.numeric(lca4$aic)
AIC.5 <-as.numeric(lca5$aic)
AIC.6 <-as.numeric(lca6$aic)
BIC.1 <-as.numeric(lca1$bic)
BIC.2 <-as.numeric(lca2$bic)
BIC.3 <-as.numeric(lca3$bic)
BIC.4 <-as.numeric(lca4$bic)
BIC.5 <-as.numeric(lca5$bic)
BIC.6 <-as.numeric(lca6$bic)
llik.1 <-as.numeric(lca1$llik)
llik.2 <-as.numeric(lca2$llik)
llik.3 <-as.numeric(lca3$llik)
llik.4 <-as.numeric(lca4$llik)
llik.5 <-as.numeric(lca5$llik)
llik.6 <-as.numeric(lca6$llik)
chisq.1 <- as.numeric(lca1$Chisq)
chisq.2 <- as.numeric(lca2$Chisq)
chisq.3 <- as.numeric(lca3$Chisq)
chisq.4 <- as.numeric(lca4$Chisq)
chisq.5 <- as.numeric(lca5$Chisq)
chisq.6 <- as.numeric(lca6$Chisq)
G.1 <- as.numeric(lca1$Gsq)
G.2 <- as.numeric(lca2$Gsq)
G.3 <- as.numeric(lca3$Gsq)
G.4 <- as.numeric(lca4$Gsq)
G.5 <- as.numeric(lca5$Gsq)
G.6 <- as.numeric(lca6$Gsq)
n.obs1 <- as.numeric(lca1$Nobs)
n.obs2 <- as.numeric(lca2$Nobs)
n.obs3 <- as.numeric(lca3$Nobs)
n.obs4 <- as.numeric(lca4$Nobs)
n.obs5 <- as.numeric(lca5$Nobs)
n.obs6 <- as.numeric(lca6$Nobs)
#Creación de Vectores para TABLA DE COMPARACIÓN
AIC <- c(AIC.1, AIC.2,AIC.3,AIC.4,AIC.5, AIC.6)
BIC <- c(BIC.1, BIC.2,BIC.3,BIC.4,BIC.5, BIC.6)
llik <- c(llik.1, llik.2,llik.3,llik.4,llik.5, llik.6)
chi.cuadrado <- c(chisq.1, chisq.2,chisq.3,chisq.4,chisq.5, chisq.6)
G2 <- c(G.1, G.2,G.3,G.4,G.5, G.6)
N <- c(n.obs1, n.obs2,n.obs3,n.obs4,n.obs5, n.obs6)
Modelos <- c("1 clase", "2 clases", "3 clases", "4 clases", "5 clases", "6 clases")
#CREACIÓN TABLA ESTADÍSTICOS DE AJUSTE MODELOS TODAS LAS VARIABLES
fit.indices <- data.frame(Modelos,AIC,BIC,llik,chi.cuadrado,G2,N)
fit.indices
#Extraer valores de inicio (modelo seleccionado)
probs.start<-lca4$probs.start
#Reanalizar con gráficos
lca4<-poLCA(f, cohesion_med, nclass=4, probs.start=probs.start,graphs=TRUE, na.rm=TRUE, maxiter=3000)
# Graph latent classes
lc4_probs=as.data.frame(lc4$probs)
lca4 <- poLCA(f,cohesion_med, nclass=4,graphs=F, verbose = FALSE)
# Graph latent classes
lca4_probs=as.data.frame(lca4$probs)
dim(lca4_probs)
View(lca4_probs)
names(lca4_probs)
datlca_tot_par=lca4_probs[c(2,4,6,8,10,12,14,16,18)] #dejar solo prob "si"
datlca_tot_par$class=c(1:4)
View(datlca_tot_par)
library(reshape2)
datlca_tot_parl=melt(datlca_tot_par, id=c("class") )
str(datlca_tot_parl)
print(levels(datlca_tot_parl$variable))
# Relabel factors
datlca_tot_parl$variable=factor(datlca_tot_parl$variable, labels=c("Pob 1a resp.", "Pob 2a resp.", "Riq 1a resp.", "Riq 2a resp."))
# Relabel factors
datlca_tot_parl$variable=factor(datlca_tot_parl$variable, labels=c("Confianza", "Diversidad", "Lazos", "Identificación", "Justicia", "Conf. Instituciones","Solidaridad", "Participación", "Vecinal"))
lca4$P # class size
datlca_tot_parl$class=factor(datlca_tot_parl$class,labels=c("Clase 1 (25%)", "Clase 2 (21%)", "Clase 3 (28%)", "Clase 4 (26%)"))
lca4_graph=  ggplot(data = datlca_tot_parl,
aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
lca4_graph= ggplot2:: ggplot(data = datlca_tot_parl,
aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
lca4_graph= ggplot2::ggplot(data = datlca_tot_parl,
aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
View(datlca_tot_parl)
lca4_graph= ggplot2::ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
lca4_graph= ggplot2::ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
df <- data.frame(dose=c("D0.5", "D1", "D2"),
len=c(4.2, 10, 29.5))
ggplot(data=df, aes(x=dose, y=len, group=1)) +
geom_line()+
geom_point()
ggplot2::ggplot(data=df, aes(x=dose, y=len, group=1)) +
geom_line()+
geom_point()
packageVersion("ggplot2")
update.packages("ggplot2")
packageVersion
packageVersion("ggplot2")
install.packages("ggplot2")
install.packages("ggplot2")
ggplot2::ggplot(data=df, aes(x=dose, y=len, group=1)) +
geom_line()+
geom_point()
library(ggplot2)
ggplot(data=df, aes(x=dose, y=len, group=1)) +
geom_line()+
geom_point()
library(ggplot2)
lca4_graph=ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
lca4_graph
lca4_graph
lca4_graph=ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
lca4_graph
lca4_graph <- ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class))
lca4_graph
View(lca4_graph)
ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class))
+
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
ggplot(data=df, aes(x=dose, y=len, group=1)) +
geom_line()+
geom_point()
ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social\n") +
xlab("\nIndicadores Cohesión") +
ylab("Probabilidades condicionales")
ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social") +
xlab("Indicadores Cohesión") +
ylab("Probabilidades condicionales")
lca4_graph
ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social") +
xlab("Indicadores Cohesión") +
ylab("Probabilidades condicionales")
ggsave("output/graficos/lca4.jpg", plot = lca4_graph, height=4, width=10, units="in", dpi=350 )
ggsave("output/graphs/lca4.jpg", plot = lca4_graph, height=4, width=10, units="in", dpi=350 )
lca4_graph <-ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social") +
xlab("Indicadores Cohesión") +
ylab("Probabilidades condicionales")
lca4_graph
ggsave("output/graphs/lca4.jpg", plot = lca4_graph, height=4, width=10, units="in", dpi=350 )
# Graph latent classes, 3 clases
lca3_probs=as.data.frame(lca3$probs)
dim(lca3_probs)
names(lca3_probs)
datlca_tot_par=lca3_probs[c(2,4,6,8,10,12,14,16,18)] #dejar solo prob "si"
datlca_tot_par$class=c(1:3) # añadir número de clase
library(reshape2)
datlca_tot_parl=melt(datlca_tot_par, id=c("class") )
str(datlca_tot_parl)
print(levels(datlca_tot_parl$variable))
# Relabel factors
datlca_tot_parl$variable=factor(datlca_tot_parl$variable, labels=c("Confianza", "Diversidad", "Lazos", "Identificación", "Justicia", "Conf. Instituciones","Solidaridad", "Participación", "Vecinal"))
lca3$P # class size
datlca_tot_parl$class=factor(datlca_tot_parl$class,labels=c("Clase 1 (32%)", "Clase 2 (42%)", "Clase 3 (26%)"))
library(ggplot2)
lca3_graph <-ggplot(data = datlca_tot_parl, aes(x=variable, y=value, group=class, shape=class)) +
geom_line(aes(linetype=class)) + geom_point(size = 2) +
ggtitle("Clases latentes de Cohesión Social") +
xlab("Indicadores Cohesión") +
ylab("Probabilidades condicionales")
lca3_graph
ggsave("output/graphs/lca3.jpg", plot = lca3_graph, height=4, width=10, units="in", dpi=350 )
