addCoef.col = "#000390",
type = "upper",
tl.col = "black",
col=colorRampPalette(c("white","#0068DC"))(12),
bg = "white",
na.label = "-",
lower.col = "black")
dev.off()
corrplot::corrplot(lazos_cor,
method = "color",
addCoef.col = "#000390",
type = "upper",
tl.col = "black",
col=colorRampPalette(c("white","#0068DC"))(12),
bg = "white",
na.label = "-",
lower.col = "black")
dev.print(svg,           # Tipo de archivo para la exportación (svg, jpeg, ...)
"bookdown-files/output/graphs/lazos_cor.svg")
?par
par(family="Arial", size= 10)
table(data$m18)
data %>% select(m18) %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
knitr::opts_chunk$set(echo = TRUE, warning=F, message=F)
# Cargar paquetes
pacman::p_load(dplyr, car, summarytools, webshot, knitr, kableExtra, corrplot, ggplot2, sjPlot, sjmisc, semPlot, semTools, lavaan, texreg, lme4)
data %>% select(m18) %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data %>% select(m18_w01) %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data %>% select(m18_w03) %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data %>% select(m18) %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data %>% select(m08) %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data %>% select(m18_w01) %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
knitr::opts_chunk$set(echo = T, warning = F, message = F)
data$m18_w01 <- car::recode(data$m18_w01, "c(1,2,3)=1 ; 4=2")
data$m18_w01 <- factor(data$m18_w01, levels = c("1", "2"), labels=c("Si cotiza", "No esta cotizando"))
frq(data$m18_w01)
# Cargar paquetes
pacman::p_load(dplyr, car, summarytools, webshot, knitr, kableExtra, corrplot, ggplot2, sjPlot, sjmisc, semPlot, semTools, lavaan, texreg, lme4)
data$lazos_w01 = data$vol.red_w01
data$lazos_w03 = data$vol.red_w03
data %>% select(lazos_w01, lazos_w03)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
frq(hacin_ciu)
frq(data$hacin_ciu)
frq(data$hacin_ciu)
frq(data$hacin_mnz)
hacin_mnz
data$hacin_mnz
cit <- read_excel("input/data/ELSOC_CIT_Dataset_2016.xlsx")
pacman::p_load(dplyr, car, summarytools, webshot, sjmisc, readxl)
cit <- read_excel("input/data/ELSOC_CIT_Dataset_2016.xlsx")
table(cit$hacin_mnz)
cit <- cit %>% car::recode(., "c(994,995,996)=NA") # recode missings de no respuesta a NA
table(cit$hacin_mnz)
# Juntar base con datos CIT
data <- inner_join(data, cit, by="idencuesta", copy = FALSE, suffix = c("", "_cit"))
data$hacin_mnz
table(data$hacin_mnz)
# Cargar base de datos
load("input/data/data.RData")
table(data$hacin_mnz)
knitr::opts_chunk$set(echo = TRUE, warning=F, message=F)
data$lazos_w01 = data$vol.red_w01
data$lazos_w03 = data$vol.red_w03
data %>% select(lazos_w01, lazos_w03, vol.red_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$lazos_w01 = data$vol.red_w01
data$lazos_w03 = data$vol.red_w03
data$lazos_w05 = data$vol.red_w05
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$lazos_w01 <- ifelse((data$lazos_w01<1.5), 1,
ifelse((data$lazos_w01<2.5), 2,
ifelse((data$lazos_w01<3.5), 3,
ifelse((data$lazos_w01<4.5), 4,
ifelse((data$lazos_w01<=5), 5, NA)))))
data$lazos_w03 <- ifelse((data$lazos_w03<1.5), 1,
ifelse((data$lazos_w03<2.5), 2,
ifelse((data$lazos_w03<3.5), 3,
ifelse((data$lazos_w03<4.5), 4,
ifelse((data$lazos_w03<=5), 5, NA)))))
data$lazos_w01<- factor(data$lazos_w01, levels = c(1, 2, 3, 4, 5), labels = c("No tiene", "De 1 a 2", "De 3 a 5", "De 6 a 10", "Mas de 10"))
data$lazos_w03<- factor(data$lazos_w03, levels = c(1, 2, 3, 4, 5), labels = c("No tiene", "De 1 a 2", "De 3 a 5", "De 6 a 10", "Mas de 10"))
data %>% select(lazos_w01, lazos_w03)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$lazos_w01 = data$vol.red_w01
data$lazos_w03 = data$vol.red_w03
data$lazos_w05 = data$vol.red_w05
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$lazos_w01<- factor(data$lazos_w01, levels = c(1, 2, 3, 4, 5), labels = c("No tiene", "De 1 a 2", "De 3 a 5", "De 6 a 10", "Mas de 10"))
data$lazos_w03<- factor(data$lazos_w03, levels = c(1, 2, 3, 4, 5), labels = c("No tiene", "De 1 a 2", "De 3 a 5", "De 6 a 10", "Mas de 10"))
data$lazos_w05<- factor(data$lazos_w05, levels = c(1, 2, 3, 4, 5), labels = c("No tiene", "De 1 a 2", "De 3 a 5", "De 6 a 10", "Mas de 10"))
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$ponderador02_w05 <- data$ponderador02
elsoc_long <- long_panel(data = data, #base de datos formato wide
prefix = "_w0", #caracteres antes de la etiqueta de cada ola
begin = 1, #etiqueta de la primera ola
end = 5, #etiqueta de la última ola
label_location = "end", #indica donde se localiza la etiqueta asociada a la ola
id = "idencuesta", #indica identificador individual
wave = "ola") #nombre que tomará la variable que indica periodo.
# Cargar paquetes
pacman::p_load(dplyr, panelr, survey, ggplot2, summarytools)
elsoc_long <- long_panel(data = data, #base de datos formato wide
prefix = "_w0", #caracteres antes de la etiqueta de cada ola
begin = 1, #etiqueta de la primera ola
end = 5, #etiqueta de la última ola
label_location = "end", #indica donde se localiza la etiqueta asociada a la ola
id = "idencuesta", #indica identificador individual
wave = "ola") #nombre que tomará la variable que indica periodo.
#Recode variable "ola" correspondiente a la ola de medición.
elsoc_long$ola <- factor(elsoc_long$ola,labels = c('2016', '2017', '2018', '2019', '2020'))
elsoc_long$ola <- sjlabelled::set_label(elsoc_long$ola, label = c("Ola de Medición"))
elsoc_diseno <- svydesign(ids = ~segmento, #muestreo por conglomerado a nivel de manzanas (segmento)
strata = ~estrato, #muestreo estratificado a nivel ciudad (estato)
weights = ~ponderador02, #ponderador de corte transversal
nest = TRUE,
data = elsoc_long)
#Paso 1
datos.lazos <- data.frame((svytable(~lazos + ola + idencuesta, elsoc_diseno, round = F))) %>% dplyr::filter(Freq>0)  %>% group_by(ola) %>% mutate(porcentaje=Freq/sum(Freq)) %>% na.omit()
#Paso 2
etiquetas.lazos <- data.frame((svytable(~lazos + ola, elsoc_diseno, round = F))) %>% group_by(ola) %>% mutate(porcentaje=Freq/sum(Freq)) %>% na.omit() %>%
mutate(idencuesta = 1)
alluvial_lazos <- ggplot(datos.lazos, aes(x = ola, fill = lazos, stratum = lazos,
alluvium = idencuesta, y = porcentaje))+
ggalluvial::geom_flow(alpha = .66) +
ggalluvial::geom_stratum(linetype = 0) +
scale_y_continuous(labels = scales::percent) +
ylab(label = NULL) +
xlab(label = NULL) +
theme(legend.position = 'top',
legend.title = element_blank()) +
scale_fill_viridis_d(begin = 0, end = .95, direction = -1, option = 'viridis') +
geom_text(data = etiquetas.lazos,
aes(label = ifelse(porcentaje > 0.03 , scales::percent(porcentaje, accuracy = .1),"")),
position = position_stack(vjust = .5),
show.legend = FALSE,
size = 2,
color = rep('white'))+
ggtitle('Cambio de frecuencias según año')
alluvial_lazos
knitr::opts_chunk$set(echo = TRUE, warning=F, message=F)
ggsave(alluvial_lazos, file = "bookdown-files/output/graphs/alluvial_lazos.svg",device = "svg",width = 25,height = 13,dpi = "retina",units = "cm")
# Cargar paquetes
pacman::p_load(dplyr, panelr, survey, ggplot2, summarytools)
ggsave(alluvial_lazos, file = "bookdown-files/output/graphs/alluvial_lazos.svg",device = "svg",width = 25,height = 13,dpi = "retina",units = "cm")
alluvial_lazos <- ggplot(datos.lazos, aes(x = ola, fill = lazos, stratum = lazos,
alluvium = idencuesta, y = porcentaje))+
ggalluvial::geom_flow(alpha = .66) +
ggalluvial::geom_stratum(linetype = 0) +
scale_y_continuous(labels = scales::percent) +
ylab(label = NULL) +
xlab(label = NULL) +
theme(legend.position = 'top',
legend.title = element_blank()) +
scale_fill_viridis_d(begin = 0, end = .95, direction = -1, option = 'viridis') +
geom_text(data = etiquetas.lazos,
aes(label = ifelse(porcentaje > 0.03 , scales::percent(porcentaje, accuracy = .1),"")),
position = position_stack(vjust = .5),
show.legend = FALSE,
size = 2,
color = rep('white'))+
ggtitle('Cambio de frecuencias según año')
alluvial_lazos
data$lazos_w01 = as.numeric(data$vol.red_w01)
data$lazos_w03 = as.numeric(data$vol.red_w03)
data$lazos_w05 = as.numeric(data$vol.red_w05)
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$lazos_w01<- factor(data$lazos_w01, levels = c(1, 2, 3, 4, 5), labels = c("No tiene", "De 1 a 2", "De 3 a 5", "De 6 a 10", "Mas de 10"))
data$lazos_w03<- factor(data$lazos_w03, levels = c(1, 2, 3, 4, 5), labels = c("No tiene", "De 1 a 2", "De 3 a 5", "De 6 a 10", "Mas de 10"))
data$lazos_w05<- factor(data$lazos_w05, levels = c(1, 2, 3, 4, 5), labels = c("No tiene", "De 1 a 2", "De 3 a 5", "De 6 a 10", "Mas de 10"))
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$ponderador02_w05 <- data$ponderador02
elsoc_long <- long_panel(data = data, #base de datos formato wide
prefix = "_w0", #caracteres antes de la etiqueta de cada ola
begin = 1, #etiqueta de la primera ola
end = 5, #etiqueta de la última ola
label_location = "end", #indica donde se localiza la etiqueta asociada a la ola
id = "idencuesta", #indica identificador individual
wave = "ola") #nombre que tomará la variable que indica periodo.
#Recode variable "ola" correspondiente a la ola de medición.
elsoc_long$ola <- factor(elsoc_long$ola,labels = c('2016', '2017', '2018', '2019', '2020'))
elsoc_long$ola <- sjlabelled::set_label(elsoc_long$ola, label = c("Ola de Medición"))
elsoc_diseno <- svydesign(ids = ~segmento, #muestreo por conglomerado a nivel de manzanas (segmento)
strata = ~estrato, #muestreo estratificado a nivel ciudad (estato)
weights = ~ponderador02, #ponderador de corte transversal
nest = TRUE,
data = elsoc_long)
#Paso 1
datos.lazos <- data.frame((svytable(~lazos + ola + idencuesta, elsoc_diseno, round = F))) %>% dplyr::filter(Freq>0)  %>% group_by(ola) %>% mutate(porcentaje=Freq/sum(Freq)) %>% na.omit()
#Paso 2
etiquetas.lazos <- data.frame((svytable(~lazos + ola, elsoc_diseno, round = F))) %>% group_by(ola) %>% mutate(porcentaje=Freq/sum(Freq)) %>% na.omit() %>%
mutate(idencuesta = 1)
alluvial_lazos <- ggplot(datos.lazos, aes(x = ola, fill = lazos, stratum = lazos,
alluvium = idencuesta, y = porcentaje))+
ggalluvial::geom_flow(alpha = .66) +
ggalluvial::geom_stratum(linetype = 0) +
scale_y_continuous(labels = scales::percent) +
ylab(label = NULL) +
xlab(label = NULL) +
theme(legend.position = 'top',
legend.title = element_blank()) +
scale_fill_viridis_d(begin = 0, end = .95, direction = -1, option = 'viridis') +
geom_text(data = etiquetas.lazos,
aes(label = ifelse(porcentaje > 0.03 , scales::percent(porcentaje, accuracy = .1),"")),
position = position_stack(vjust = .5),
show.legend = FALSE,
size = 2,
color = rep('white'))+
ggtitle('Cambio de frecuencias según año')
alluvial_lazos
ggsave(alluvial_lazos, file = "bookdown-files/output/graphs/alluvial_lazos.svg",device = "svg",width = 25,height = 13,dpi = "retina",units = "cm")
knitr::opts_chunk$set(echo = T, warning = F, message = F)
sin.contrato_w03 <- rep(0, length(data[,1]))
data$sin.contrato_w03 <- rep(0, length(data[,1]))
data$sin.contrato_w03 <- ifelse((data$m07_w03==1 | data$m07_w03==2 | data$m07_w03==3 | data$m07_w03==7) & data$m10_w03==3, 1, sin.contrato_w03) # asalariados y personal doméstico sin contrato escrito
table(data$sin.contrato_w03)
data$sin.inicio_w03<- rep(0, length(data[, 1]))
data$sin.inicio_w03<-ifelse((data$m07_w03==4 | data$m07_w03==5) & data$m11_w03==3, 1, sin.inicio_w03) # empleadores y TCP que no dan factura ni boleta
data$sin.inicio_w03<-ifelse((data$m07_w03==4 | data$m07_w03==5) & data$m11_w03==3, 1, sin.inicio_w03) # empleadores y TCP que no dan factura ni boleta
data$sin.inicio_w03<- rep(0, length(data[, 1]))
data$sin.inicio_w03<-ifelse((data$m07_w03==4 | data$m07_w03==5) & data$m11_w03==3, 1, sin.inicio_w03) # empleadores y TCP que no dan factura ni boleta
data$sin.contrato_w03 <- rep(0, length(data[,1]))
data$sin.contrato_w03 <- ifelse((data$m07_w03==1 | data$m07_w03==2 | data$m07_w03==3 | data$m07_w03==7) & data$m10_w03==3, 1, data$sin.contrato_w03) # asalariados y personal doméstico sin contrato escrito
table(data$sin.contrato_w03)
data$sin.inicio_w03<- rep(0, length(data[, 1]))
data$sin.inicio_w03<-ifelse((data$m07_w03==4 | data$m07_w03==5) & data$m11_w03==3, 1, sin.inicio_w03) # empleadores y TCP que no dan factura ni boleta
data$sin.inicio_w03<-ifelse((data$m07_w03==4 | data$m07_w03==5) & data$m11_w03==3, 1, data$sin.inicio_w03) # empleadores y TCP que no dan factura ni boleta
table(sin.inicio_w03)
table(data$sin.inicio_w03)
data$sin.contrato_w03 <- rep(0, length(data[,1]))
data$sin.contrato_w03 <- ifelse((data$m07_w03==1 | data$m07_w03==2 | data$m07_w03==3 | data$m07_w03==7) & data$m10_w03==3, 1, data$sin.contrato_w03) # asalariados y personal doméstico sin contrato escrito
table(data$sin.contrato_w03)
data$sin.inicio_w03<- rep(0, length(data[, 1]))
data$sin.inicio_w03<-ifelse((data$m07_w03==4 | data$m07_w03==5) & data$m11_w03==3, 1, data$sin.inicio_w03) # empleadores y TCP que no dan factura ni boleta
table(data$sin.inicio_w03)
data$sin.cotizar_w03<- rep(0, length(data[, 1]))
data$sin.cotizar_w03<-ifelse((data$m07_w03==1 | data$m07_w03==2 | data$m07_w03==3 | data$m07_w03==7) & data$m18_w03==4, 1, data$sin.cotizar_w03) # asalariados y personal doméstico sin cotización previsional
table(data$sin.cotizar_w03)
data$fnr_w03<- rep(0, length(data[, 1]))
data$fnr_w03<-ifelse(data$m07_w03==6, 1, data$fnr_w03) # familiar no remunerado
table(data$fnr_w03)
informales<- data[, c('idencuesta', 'sin.contrat_.w03', 'sin.cotizar_w03', 'sin.inicio_w03', 'fnr_w03')]
informales<- data[, c('idencuesta', 'sin.contrato_.w03', 'sin.cotizar_w03', 'sin.inicio_w03', 'fnr_w03')]
informales<- data[, c('idencuesta', 'sin.contrato_w03', 'sin.cotizar_w03', 'sin.inicio_w03', 'fnr_w03')]
informales<-informales[order(informales$idencuesta),]
View(informales)
informal<- rep(0, length(data[, 1]))
length(informal)
informal<- ifelse((data$m07_w03==1 | data$m07_w03==2 | data$m07_w03==3 | data$m07_w03==7) & data$m10_w03==3, 1, informal) # asalariados y personal doméstico sin contrato escrito
informal <- ifelse((data$m07_w03==4 | data$m07_w03==5) & data$m11_w03==3, 1, informal) # empleadores y TCP que no dan factura ni boleta
informal <- ifelse((data$m07_w03==1 | data$m07_w03==2 | data$m07_w03==3 | data$m07_w03==7) & data$m18_w03==4, 1, informal) # asalariados y personal doméstico sin cotización previsional
informal<-ifelse(data$m07_w03==6, 1, informal) # familiar no remunerado
data$informal_w03<-informal
table(data$informal_w03)
### 2016 ###
data$sin.contrato_w01 <- rep(0, length(data[,1]))
data$sin.contrato_w01 <- ifelse((data$m07_w01==1 | data$m07_w01==2 | data$m07_w01==3 | data$m07_w01==7) & data$m10_w01==3, 1, data$sin.contrato_w01) # asalariados y personal doméstico sin contrato escrito
table(data$sin.contrato_w01)
data$sin.inicio_w01<- rep(0, length(data[, 1]))
data$sin.inicio_w01<-ifelse((data$m07_w01==4 | data$m07_w01==5) & data$m11_w01==3, 1, data$sin.inicio_w01) # empleadores y TCP que no dan factura ni boleta
table(data$sin.inicio_w01)
data$sin.cotizar_w01<- rep(0, length(data[, 1]))
data$sin.cotizar_w01<-ifelse((data$m07_w01==1 | data$m07_w01==2 | data$m07_w01==3 | data$m07_w01==7) & data$m18_w01==4, 1, data$sin.cotizar_w01) # asalariados y personal doméstico sin cotización previsional
table(data$sin.cotizar_w01)
data$fnr_w01<- rep(0, length(data[, 1]))
data$fnr_w01<-ifelse(data$m07_w01==6, 1, data$fnr_w01) # familiar no remunerado
table(data$fnr_w01)
informales<- data[, c('idencuesta', 'sin.contrato_w01', 'sin.cotizar_w01', 'sin.inicio_w01', 'fnr_w01')]
informales<-informales[order(informales$idencuesta),]
informal<- rep(0, length(data[, 1]))
length(informal)
informal<- ifelse((data$m07_w01==1 | data$m07_w01==2 | data$m07_w01==3 | data$m07_w01==7) & data$m10_w01==3, 1, informal) # asalariados y personal doméstico sin contrato escrito
informal <- ifelse((data$m07_w01==4 | data$m07_w01==5) & data$m11_w01==3, 1, informal) # empleadores y TCP que no dan factura ni boleta
informal <- ifelse((data$m07_w01==1 | data$m07_w01==2 | data$m07_w01==3 | data$m07_w01==7) & data$m18_w01==4, 1, informal) # asalariados y personal doméstico sin cotización previsional
informal<-ifelse(data$m07_w01==6, 1, informal) # familiar no remunerado
data$informal_w01<-informal
table(data$informal_w01)
table(data$informal_w03)
knitr::opts_chunk$set(echo = TRUE, warning=F, message=F)
data$diversidad_w01 <- car::recode(data$diversidad_w01, "c(1,2)=1; 3=2; c(4,5)=3")
# Cargar paquetes
pacman::p_load(dplyr, panelr, survey, ggplot2, summarytools)
# Cargar base elsoc longitudinal (2016-2019) creada en "preparacion"
load("input/data/data.RData")
data$lazos_w01 = as.numeric(data$vol.red_w01)
data$lazos_w03 = as.numeric(data$vol.red_w03)
data$lazos_w05 = as.numeric(data$vol.red_w05)
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data <- data %>%
rowwise() %>%
mutate(conf_interpersonal_w01 =
mean(c(c02_rec_w01, c03_rec_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_interpersonal_w02 =
mean(c(c02_rec_w02, c03_rec_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_interpersonal_w03 =
mean(c(c02_rec_w03, c03_rec_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_interpersonal_w04 =
mean(c(c02_rec_w04, c03_rec_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_interpersonal_w05 =
mean(c(c02_rec_w05, c03_rec_w05), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(diversidad_w01 =
mean(c(c06_04_w01, c06_05_w01, c06_06_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(diversidad_w03 =
mean(c(c06_04_w03, c06_05_w03, c06_06_w03), na.rm = T))
data %>% select(diversidad_w01, diversidad_w03)  %>% sjlabelled::as_label(.)  %>%  summarytools::dfSummary(, graph.col = FALSE)
data <- data %>%
rowwise() %>%
mutate(identificacion_w01 =
mean(c(c32_01_w01, c32_02_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(identificacion_w02 =
mean(c(c32_01_w02, c32_02_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(identificacion_w03 =
mean(c(c32_01_w03, c32_02_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(identificacion_w04 =
mean(c(c32_01_w04, c32_02_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(identificacion_w05 =
mean(c(c32_01_w05, c32_02_w05), na.rm = T))
data %>% select(identificacion_w01, identificacion_w02, identificacion_w03, identificacion_w04, identificacion_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data <- data %>%
rowwise() %>%
mutate(justicia_w01 =
mean(c(c18_09_w01, c18_10_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(justicia_w02 =
mean(c(c18_09_w02, c18_10_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(justicia_w03 =
mean(c(c18_09_w03, c18_10_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(justicia_w04 =
mean(c(c18_09_w04, c18_10_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(justicia_w05 =
mean(c(c18_09_w05, c18_10_w05), na.rm = T))
data %>% select(justicia_w01, justicia_w02, justicia_w03, justicia_w04, justicia_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w01 =
mean(c(c05_01_w01, c05_08_w01, c05_02_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w02 =
mean(c(c05_01_w02, c05_08_w02, c05_02_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w03 =
mean(c(c05_01_w03, c05_08_w03, c05_02_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w04 =
mean(c(c05_01_w04, c05_08_w04, c05_02_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(conf_institucional_w05 =
mean(c(c05_01_w05, c05_08_w05, c05_02_w05), na.rm = T))
data %>% select(conf_institucional_w01, conf_institucional_w02, conf_institucional_w03, conf_institucional_w04, conf_institucional_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data <- data %>%
rowwise() %>%
mutate(solidaridad_w01 =
mean(c(c07_05_w01, c07_06_w01, c07_07_w01, c07_08_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(solidaridad_w02 =
mean(c(c07_05_w02, c07_06_w02, c07_07_w02, c07_08_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(solidaridad_w03 =
mean(c(c07_05_w03, c07_06_w03, c07_07_w03, c07_08_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(solidaridad_w04 =
mean(c(c07_05_w04, c07_06_w04, c07_07_w04, c07_08_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(solidaridad_w05 =
mean(c(c07_05_w05, c07_06_w05, c07_07_w05, c07_08_w05), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(participacion_w01 =
mean(c(c08_01_w01, c08_02_w01, c08_03_w01, c08_04_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(participacion_w02 =
mean(c(c08_01_w02, c08_02_w02, c08_03_w02, c08_04_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(participacion_w03 =
mean(c(c08_01_w03, c08_02_w03, c08_03_w03, c08_04_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(participacion_w04 =
mean(c(c08_01_w04, c08_02_w04, c08_03_w04, c08_04_w04), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(participacion_w05 =
mean(c(c08_02_w05, c08_04_w05), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial_w01 =
mean(c(t02_01_w01, t02_02_w01, t02_03_w01, t02_04_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial_w02 =
mean(c(t02_01_w02, t02_02_w02, t02_03_w02, t02_04_w02), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial_w03 =
mean(c(t02_01_w03, t02_02_w03, t02_03_w03, t02_04_w03), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(cohesion_territorial_w04 =
mean(c(t02_01_w04, t02_02_w04, t02_03_w04, t02_04_w04), na.rm = T))
data %>% select(cohesion_territorial_w01, cohesion_territorial_w02, cohesion_territorial_w03, cohesion_territorial_w04)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$diversidad_w01 <- ifelse((data$diversidad_w01<1.5), 1,
ifelse((data$diversidad_w01<2.5), 2,
ifelse((data$diversidad_w01<3.5), 3,
ifelse((data$diversidad_w01<4.5), 4,
ifelse((data$diversidad_w01<=5), 5, NA)))))
data$diversidad_w03 <- ifelse((data$diversidad_w03<1.5), 1,
ifelse((data$diversidad_w03<2.5), 2,
ifelse((data$diversidad_w03<3.5), 3,
ifelse((data$diversidad_w03<4.5), 4,
ifelse((data$diversidad_w03<=5), 5, NA)))))
data$diversidad_w01<- factor(data$diversidad_w01, levels = c(1, 2, 3, 4, 5), labels = c("Nada", "Poca", "Algo", "Bastante", "Mucha"))
data$diversidad_w03<- factor(data$diversidad_w03, levels = c(1, 2, 3, 4, 5), labels = c("Nada", "Poca", "Algo", "Bastante", "Mucha"))
data$diversidad_w01 <- car::recode(data$diversidad_w01, "c(1,2)=1; 3=2; c(4,5)=3")
data$diversidad_w01 <- car::recode(data$diversidad_w01, "c(1,2)=1; 3=2; c(4,5)=3")
data$diversidad_w01<- factor(data$diversidad_w01, levels = c(1, 2, 3), labels = c("Nada o Poca", "Algo", "Bastante o Mucha"))
sjmisc::frq(data$diversidad_w01)
data <- data %>%
rowwise() %>%
mutate(diversidad_w01 =
mean(c(c06_04_w01, c06_05_w01, c06_06_w01), na.rm = T))
data <- data %>%
rowwise() %>%
mutate(diversidad_w03 =
mean(c(c06_04_w03, c06_05_w03, c06_06_w03), na.rm = T))
data$diversidad_w01 <- ifelse((data$diversidad_w01<1.5), 1,
ifelse((data$diversidad_w01<2.5), 2,
ifelse((data$diversidad_w01<3.5), 3,
ifelse((data$diversidad_w01<4.5), 4,
ifelse((data$diversidad_w01<=5), 5, NA)))))
data$diversidad_w03 <- ifelse((data$diversidad_w03<1.5), 1,
ifelse((data$diversidad_w03<2.5), 2,
ifelse((data$diversidad_w03<3.5), 3,
ifelse((data$diversidad_w03<4.5), 4,
ifelse((data$diversidad_w03<=5), 5, NA)))))
data$diversidad_w01 <- car::recode(data$diversidad_w01, "c(1,2)=1; 3=2; c(4,5)=3")
data$diversidad_w01<- factor(data$diversidad_w01, levels = c(1, 2, 3), labels = c("Nada o Poca", "Algo", "Bastante o Mucha"))
data %>% select(diversidad_w01, diversidad_w03)  %>% sjlabelled::as_label(.)  %>%  summarytools::dfSummary(, graph.col = FALSE)
data$diversidad_w03 <- car::recode(data$diversidad_w03, "c(1,2)=1; 3=2; c(4,5)=3")
data$diversidad_w03<- factor(data$diversidad_w03, levels = c(1, 2, 3), labels = c("Nada o Poca", "Algo", "Bastante o Mucha"))
data %>% select(diversidad_w01, diversidad_w03)  %>% sjlabelled::as_label(.)  %>%  summarytools::dfSummary(, graph.col = FALSE)
data$lazos_w01 <- car::recode(data$lazos_w01, "c(1,2)=1; 3=2; c(4,5)=3")
data$lazos_w02 <- car::recode(data$lazos_w02, "c(1,2)=1; 3=2; c(4,5)=3")
data$lazos_w03 <- car::recode(data$lazos_w03, "c(1,2)=1; 3=2; c(4,5)=3")
data$lazos_w02 <- car::recode(data$lazos_w02, "c(1,2)=1; 3=2; c(4,5)=3")
data$lazos_w05 <- car::recode(data$lazos_w05, "c(1,2)=1; 3=2; c(4,5)=3")
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$lazos_w01 = as.numeric(data$vol.red_w01)
data$lazos_w03 = as.numeric(data$vol.red_w03)
data$lazos_w05 = as.numeric(data$vol.red_w05)
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$lazos_w01 <- car::recode(data$lazos_w01, "c(1,2)=1; c(3,4)=2; 5=3")
data$lazos_w01<- factor(data$lazos_w01, levels = c(1, 2, 3), labels = c("Menos de dos", "De 3 a 10", "Mas de 10"))
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$lazos_w03 <- car::recode(data$lazos_w03, "c(1,2)=1; c(3,4)=2; 5=3")
data$lazos_w05 <- car::recode(data$lazos_w05, "c(1,2)=1; c(3,4)=2; 5=3")
data$lazos_w03<- factor(data$lazos_w03, levels = c(1, 2, 3), labels = c("Menos de dos", "De 3 a 10", "Mas de 10"))
data$lazos_w05<- factor(data$lazos_w05, levels = c(1, 2, 3), labels = c("Menos de dos", "De 3 a 10", "Mas de 10"))
data %>% select(lazos_w01, lazos_w03, lazos_w05)  %>% sjlabelled::as_label(.)  %>%  dfSummary(, graph.col = FALSE)
data$diversidad_w01 <- car::recode(data$diversidad_w01, "c(1,2)=1; 3=2; c(4,5)=3")
data$identificacion_w01 <- car::recode(data$identificacion_w01, "c(1,2)=1; 3=2; c(4,5)=3")
library(readr)
install.packages("readr")
library(readr)
library(readr)
install.packages("readr")
install.packages("readr")
esi_2020_personas_5000primeros <- read_csv("C:/Users/kevin/Downloads/esi-2020---personas_5000primeros.csv")
install.packages("readr")
install.packages("readr")
library(readr)
esi_2020_personas_5000primeros <- read_csv("C:/Users/kevin/Downloads/esi-2020---personas_5000primeros.csv")
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
NACIMIENTOS_2013 <- read_excel("C:/Users/kevin/Downloads/NACIMIENTOS_2013.xlsx")
table(NACIMIENTOS_2013$SEXO)
table(NACIMIENTOS_2013$PESO, NACIMIENTOS_2013$SEMANAS)
corrplot::corrplot.mixed(NACIMIENTOS_2013$PESO, NACIMIENTOS_2013$SEMANAS)
corrplot::corrplot.mixed(select(NACIMIENTOS_2013, PESO, SEMANAS)
